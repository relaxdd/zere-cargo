{"version":3,"file":"js/tracks.js","mappings":"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","sources":["webpack://zere-cargo/./src/scss/common.scss","webpack://zere-cargo/./src/scss/tracks.scss","webpack://zere-cargo/./src/ts/tracks.ts","webpack://zere-cargo/webpack/bootstrap","webpack://zere-cargo/webpack/runtime/global","webpack://zere-cargo/webpack/runtime/publicPath","webpack://zere-cargo/webpack/startup"],"sourcesContent":["export default __webpack_public_path__ + \"css/common.css\";","export default __webpack_public_path__ + \"css/tracks.css\";","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction useModals(list) {\n    function closeHandler(e) {\n        const $modal = e.currentTarget.closest('.zc_modal');\n        const $html = document.querySelector('html');\n        if (!$modal)\n            return;\n        $html.classList.remove('zc_modal__show');\n        $modal.classList.remove('zc_modal__active');\n        setTimeout(() => {\n            $modal.style.removeProperty('display');\n        }, 300);\n    }\n    function openHandler(e) {\n        var _a;\n        const id = (_a = e.currentTarget.dataset) === null || _a === void 0 ? void 0 : _a['modal'];\n        if (!id)\n            return;\n        const $html = document.querySelector('html');\n        const $modal = document.querySelector(`#${id}.zc_modal`);\n        if (!$modal)\n            return;\n        $html.classList.add('zc_modal__show');\n        $modal.style.setProperty('display', 'block');\n        setTimeout(() => {\n            $modal.classList.add('zc_modal__active');\n        }, 0);\n    }\n    list.forEach(it => {\n        const $modal = document.querySelector(`#${it}.zc_modal`);\n        if (!$modal)\n            return;\n        const $close = $modal.querySelector('.zc_modal__block-close-button');\n        if ($close)\n            $close.addEventListener('click', closeHandler);\n        const $btn = document.querySelector(`[data-modal=\"${it}\"]`);\n        if ($btn)\n            $btn.addEventListener('click', openHandler);\n    });\n}\nfunction copyAddress() {\n    function clickHandler(e) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const text = '浙江省-金华市-义乌市-苏溪镇-义北工业园区祥和路1号 14-786库房电话:18905897786';\n                yield window.navigator.clipboard.writeText(text);\n                alert('Текст скопирован!');\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n    const $btn = document.querySelector('#copy-address');\n    if ($btn)\n        $btn.addEventListener('click', clickHandler);\n}\nfunction checkContentType(headers) {\n    var _a;\n    return (_a = headers.get('Content-Type')) === null || _a === void 0 ? void 0 : _a.includes('application/json');\n}\nfunction validateJSON(json) {\n    try {\n        return JSON.parse(json);\n    }\n    catch (e) {\n        return false;\n    }\n}\nfunction deleteTrack() {\n    const $items = document.querySelectorAll('.zc-delete-item');\n    function deleteElement(id) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const url = '/lk/api/index.php?action=delete-track&id=' + id;\n            const resp = yield fetch(url, { method: 'GET' });\n            const text = yield resp.text();\n            if (!resp.ok || !checkContentType(resp.headers))\n                throw new Error(text);\n            const data = validateJSON(text);\n            if (data === false)\n                throw new Error(text);\n            console.log(data);\n        });\n    }\n    function clickHandler(e) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const id = (_a = e.currentTarget.dataset) === null || _a === void 0 ? void 0 : _a['itemId'];\n            if (!id)\n                return;\n            const msg = 'Вы уверены что хотите удалить этот элемент?';\n            const agree = window.confirm(msg);\n            if (!agree)\n                return;\n            try {\n                yield deleteElement(id);\n            }\n            catch (err) {\n                console.error(err);\n            }\n        });\n    }\n    $items.forEach(($it) => {\n        $it.addEventListener('click', clickHandler);\n    });\n}\nfunction createTrack() {\n    const $form = document.querySelector('form#create-track');\n    if (!$form)\n        return;\n    function submitHandler(e) {\n        return __awaiter(this, void 0, void 0, function* () {\n            e.preventDefault();\n            const url = '/lk/api/index.php?action=create-track';\n            const body = new FormData($form);\n            const resp = yield fetch(url, { method: 'POST', body });\n            const text = yield resp.text();\n            if (!resp.ok || !checkContentType(resp.headers))\n                throw new Error(text);\n            const data = validateJSON(text);\n            if (data === false)\n                throw new Error(text);\n            console.log(data);\n        });\n    }\n    $form.addEventListener('submit', submitHandler);\n}\nfunction main() {\n    copyAddress();\n    deleteTrack();\n    createTrack();\n    useModals(['add-track-modal', 'example-modal']);\n}\nwindow.addEventListener('load', main);\n","// The require scope\nvar __webpack_require__ = {};\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_modules__[365](0, {}, __webpack_require__);\n__webpack_modules__[619](0, {}, __webpack_require__);\nvar __webpack_exports__ = {};\n__webpack_modules__[498](0, __webpack_exports__, __webpack_require__);\n"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","checkContentType","headers","_a","get","includes","validateJSON","json","JSON","parse","deleteTrack","clickHandler","id","currentTarget","dataset","window","confirm","url","resp","fetch","method","text","ok","Error","data","console","log","deleteElement","err","error","document","querySelectorAll","forEach","$it","addEventListener","$btn","querySelector","navigator","clipboard","writeText","alert","copyAddress","$form","preventDefault","body","FormData","createTrack","list","closeHandler","$modal","closest","$html","classList","remove","setTimeout","style","removeProperty","openHandler","add","setProperty","it","$close","useModals","__webpack_require__","g","globalThis","Function","scriptUrl","importScripts","location","currentScript","src","scripts","getElementsByTagName","length","i","replace","p","__webpack_modules__"],"sourceRoot":""}